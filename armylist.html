<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="armylist.css">
    <title>EA</title>
  </head>
  <body>
    <div id="container" class="container">
      <div id="content"></div>
    </div>

    <script id="army-template" type="text/x-handlebars-template">
      <h1>{{fraction}} - {{army}}</h1>
      <p><small>Version {{version}} - {{release}}</small></p>

      {{#if introduction}}
      <p>{{introduction}}</p>
      {{/if}}

      {{#if usage}}
      <h5>Using The Army List</h5>
      {{#each usage}}
      <p>{{this}}</p>
      {{/each}}
      {{/if}}

      {{#if specialRules}}
      <h5>Special Rules</h5>
      {{#each specialRules}}
      {{#if @first}}
      <div class="card">
      {{else}}
      <div class="card" style="margin-top: .8rem">
      {{/if}}
        <div class="card-header">{{title}}</div>
        <div class="card-body">
          {{#each description}}
            <p class="card-text">{{this}}</p>
          {{/each}}
        </div>
      </div>
      {{/each}}
      {{/if}}

      <h2>{{army}} Army List</h2>
      <p>{{strategy}} {{initiative}}</p>

      {{#each sections}}
      {{#if @first}}
      <div class="card">
      {{else}}
      <div class="card" style="margin-top: .8rem">
      {{/if}}
        <div class="card-header">{{name}}{{#if description}}<br><small>{{description}}</small>{{/if}}</div>
        <div>
          <table class="table table-striped">
            <thead>
              <tr>
                <th scope="col">Formation</th>
                <th scope="col">Units</th>
                <th scope="col">Upgrades</th>
                <th scope="col">Cost</th>
              </tr>
            </thead>
            <tbody>
              {{#each formations}}
              <tr>
                <td>{{name}}</td>
                <td>{{units}}</td>
                <td>{{upgrades}}</td>
                <td>{{points}} points</td>
              </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
      </div>
      {{/each}}

      {{#with upgrades}}
      <div class="card" style="margin-top: .8rem">
        <div class="card-header">{{title}}<br><small>{{description}}</small></div>
        <div>
          <table class="table">
            <thead>
              <tr>
                <th scope="col">Upgrades</th>
                <th scope="col" colspan="2">Units</th>
                <th scope="col">Cost</th>
              </tr>
            </thead>
            <tbody>
              {{#each items}}
              {{#upgrade this}}
              {{#unless options}}
              <tr class="unit-row-{{#oddEven @index}}{{/oddEven}}">
                <td>{{name}}</td>
                <td colspan="2">{{description}}</td>
                <td>{{points}}</td>
              </tr>
              {{else}}
              <tr class="unit-row-{{#oddEven @index}}{{/oddEven}}">
                <td rowspan="{{@options}}">{{name}}</td>
                <td rowspan="{{@options}}">{{description}}</td>
                {{#each options}}
                {{#unless @first}}<tr class="unit-row-{{#oddEven @../index}}{{/oddEven}}">{{/unless}}
                  <td>{{description}}</td>
                  <td>{{points}}</td>
                </tr>
                {{/each}}
              {{/unless}}
              {{/upgrade}}
              {{/each}}
            </tbody>
          </table>
        </div>
      </div>
      {{/with}}

      <h2>{{army}} Forces</h2>

      <div class="card">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Name</th>
            <th scope="col">Type</th>
            <th scope="col">Speed</th>
            <th scope="col">Armour</th>
            <th scope="col">CC</th>
            <th scope="col">FF</th>
            <th scope="col">Weapons</th>
            <th scope="col">Range</th>
            <th scope="col">Firepower</th>
          </tr>
        </thead>
        <tbody>
          {{#each units}}
          {{#unit this}}
          <tr class="unit-row-{{#oddEven @index}}{{/oddEven}} {{#unless @singleLine}}unit-row-top{{/unless}}">
            <td rowspan="{{@weaponLines}}" class="unit-name">{{name}}</td>
            <td rowspan="{{@weaponLines}}">{{#if type}}{{type}}{{else}}n/a{{/if}}</td>
            <td rowspan="{{@weaponLines}}">{{#if speed}}{{speed}}cm{{else}}n/a{{/if}}</td><!-- TODO: Remove cm if speed is string -->
            <td rowspan="{{@weaponLines}}">{{#if armour}}{{armour}}+{{else}}n/a{{/if}}</td>
            <td rowspan="{{@weaponLines}}">{{#if cc}}{{cc}}+{{else}}n/a{{/if}}</td>
            <td rowspan="{{@weaponLines}}">{{#if ff}}{{ff}}+{{else}}n/a{{/if}}</td>
            {{#each weapons}}
            {{#each modes}}
            {{#unless (and @../first @first)}}<tr class="unit-row-{{#oddEven @../../index}}{{/oddEven}} {{#if (and @last @hasNoNotes)}}unit-row-bottom{{else}}unit-row-middle{{/if}}">{{/unless}}
            <td>{{#if join}}<i>{{join}}</i>{{else}}{{../name}}{{/if}}</td>
            <td>{{range}}{{#if range}}cm{{/if}}</td>
            <td>{{firepower}}</td>
            </tr>
            {{/each}}
            {{/each}}
            {{#if @hasNotes}}
            <tr class="unit-row-{{#oddEven @index}}{{/oddEven}} unit-row-bottom">
              <td colspan="9" style="border-top: none">
                Notes:
                {{#each specialRules}}
                  {{#unless @last}}<i>{{this}}</i>,{{/unless}}
                  {{#if @last}}<i>{{this}}</i>.{{/if}}
                {{/each}}
                {{notes}}
              </td>
            </tr>
            {{/if}}
          {{/unit}}
          {{/each}}
        </tbody>
      </table>
      </div>

      <p>&nbsp;</p>

    </script>

    <!-- Optional JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.12/handlebars.min.js"></script>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <script>
      $(document).ready(function () {
          console.log("[document-ready] initializing...");

          var template = Handlebars.compile($("#army-template").html());

          Handlebars.registerHelper('oddEven', function(index) {
            return index % 2 == 0 ? 'even' : 'odd';
          });

          Handlebars.registerHelper('and', function(one, two) {
            return true === one && true === two;
          });

          Handlebars.registerHelper('upgrade', function(context, options) {
            if (options.data) {
              var data = Handlebars.createFrame(options.data);
              data.options = context.options !== undefined ? context.options.length : 0;
            }

            return options.fn(context, { data: data })
          });

          Handlebars.registerHelper('unit', function(context, options) {
            if (options.data) {
              var data = Handlebars.createFrame(options.data);

              var count = 0;
              for (weapon in context.weapons)
              {
                count += context.weapons[weapon].modes.length;
              }

              data.weaponLines = count;
              data.hasNotes = context.notes || context.specialRules;
              data.hasNoNotes = !data.hasNotes;
              data.singleLine = count == 1 && data.hasNoNotes;
            }

            return options.fn(context, { data: data })
          });

          var testData = {
            "fraction": "Space Marines",
            "army": "White Scars",
            "version": "1.0",
            "release": "2019-01-20",
            "strategy": "Codex Astartes Space Marine armies have a strategy rating of 5.",
            "initiative": "Imperial Navy aircraft formations have an initiative rating of 2+. All other formations have an initiative rating of 1+.",
            "specialRules": [
              {
                "title": "White Scars Transports",
                "description": [
                  "The Space Marines are a highly mobile army. Because of this the points cost of a detachment usually includes enough transport vehicles to transport it and any upgrades that have been taken. The number of vehicles will always be the minimum needed to carry the formation, you can’t take extras along to cover any losses! The transport vehicles will be Land Raiders if the detachment is Terminators, Rhinos for any other form of detachment.",
                  "Note that many formations don’t receive transports, usually because they can’t fit into them. Detachments that come with vehicles will be noted as having plus transport in the Units section of the detachment list below. White Scars detachments must take the transport vehicles for a detachment—you cannot leave them behind in order to use the unit as a garrison. You can only choose to ignore this if the detachment is instead to be deployed from a Thunderhawk gunship.",
                  "In addition you may choose to replace a detachment’s vehicles with drop pods before each game, after the opposing army is known but before objectives are placed. If you choose to do this, all transported detachments in the army must deploy from drop pods—you can’t have some in transport vehicles and some deploying from drop pods. If you do choose to use drop pods, then the affected detachments will enter play in drop pods using the rules for Planetfall (see Planetfall). Note that you will require at least one Space Marine strike cruiser or battle barge to deploy the drop pods from."
                ]
              },
              {
                "title": "They Shall Know No Fear",
                "description": [
                  "Space Marines are renowned for their tenacity and bravery. This is represented by the following rules:",
                  "* It takes 2 Blast markers to suppress a Space Marine unit or kill a unit in a broken formation (ignore any leftover Blast markers).",
                  "* Space Marine formations are only broken if they have 2 Blast markers per unit in the formation.",
                  "* Space Marines formations only count half their number of Blaster markers in assault resolution (rounding down—note that assault resolution will not receive +1 for having no Blast markers if the formation has 1 Blast marker before rounding down). Halve the number of extra hits suffered by a Space Marine formation that loses an assault, rounding down in favour of the Space Marines.",
                  "* When a broken Space Marine formation rallies, it receives a number of Blast markers equal to the number of units, rather than half this number. Space Marines with the Leader special ability remove 2 Blast markers instead of 1"
                ]
              }
            ],
            "usage": ["The following army list allows you to field an army based on one of the Space Marine Chapters that closely follows the teachings of the Codex Astartes. It can also be used as a stand in army list for other Space Marine Chapters that do not follow the Codex Astartes, such as the Blood Angels, Dark Angels and Space Wolves."],
            "units": [
              {
                "name": "Chaptain",
                "type": "CH",
                "weapons": [
                  {
                    "name": "Power Weapon",
                    "modes": [
                      {"firepower": "Assault Weapons, EA(+1), MW"}
                    ]
                  }
                ],
                "specialRules": ["Commander", "Invulnerable Save", "Leader"]
              },
              {
                "name": "Chaplain",
                "type": "CH",
                "weapons": [
                  {
                    "name": "Power Weapon",
                    "modes": [
                      {"firepower": "Assault Weapons, EA(+1), MW"}
                    ]
                  }
                ],
                "specialRules": ["Inspiring", "Invulnerable Save", "Leader"]
              },
              {
                "name": "Librarian",
                "type": "CH",
                "weapons": [
                  {
                    "name": "Smite",
                    "modes": [
                      {"firepower": "Small Arms, EA(+1), MW"}
                    ]
                  },
                  {
                    "name": "Power Weapon",
                    "modes": [
                      {"firepower": "Assault Weapons, EA(+1), MW"}
                    ]
                  }
                ],
                "specialRules": ["Invulnerable Save", "Leader"]
              },
              {
                "name": "Supreme Commander",
                "type": "CH",
                "weapons": [
                  {
                    "name": "Power Weapon",
                    "modes": [
                      {"firepower": "Assault Weapons, EA(+1), MW"}
                    ]
                  }
                ],
                "specialRules": ["Invulnerable Save", "Supreme Commander"]
              },
              {
                "name": "Assault",
                "type": "INF",
                "speed": 30,
                "armour": 4,
                "cc": 3,
                "ff": 5,
                "weapons": [
                  {
                    "name": "Bolt Pistols",
                    "modes": [
                      {"firepower": "Small Arms"}
                    ]
                  }
                ],
                "specialRules": ["Jump Packs"]
              },
              {
                "name": "Scout",
                "type": "INF",
                "speed": 15,
                "armour": 5,
                "cc": 4,
                "ff": 5,
                "weapons": [
                  {
                    "name": "Heavy Bolter",
                    "modes": [
                      {"firepower": "AP5+", "range": 30}
                    ]
                  }
                ],
                "specialRules": ["Infiltrator", "Scout"]
              },
              {
                "name": "Tactical",
                "type": "INF",
                "speed": 15,
                "armour": 4,
                "cc": 4,
                "ff": 4,
                "weapons": [
                  {
                    "name": "Missile Launcher",
                    "modes": [
                      {"firepower": "AP5+/AT6+", "range": 45}
                    ]
                  }
                ]
              },
              {
                "name": "Terminator",
                "type": "INF",
                "speed": 15,
                "armour": 4,
                "cc": 3,
                "ff": 3,
                "weapons": [
                  {
                    "name": "2× Assault Cannon",
                    "modes": [
                      {"firepower": "AP5+/AT5+", "range": 30}
                    ]
                  },
                  {
                    "name": "Power Weapons",
                    "modes": [
                      {"firepower": "Assault Weapons EA(+1) MW"}
                    ]
                  }
                ],
                "specialRules": ["Reinforced Armour", "Teleport", "Thick Rear Armour"]
              },
              {
                "name": "White Scars Bike",
                "type": "INF",
                "speed": 35,
                "armour": 4,
                "cc": 3,
                "ff": 4,
                "weapons": [
                  {
                    "name": "Twin Bolters",
                    "modes": [
                      {"firepower": "Small Arms"}
                    ]
                  }
                ],
                "specialRules": ["Mounted", "Walker"]
              },
              {
                "name": "White Scars Scout Bike",
                "type": "INF",
                "speed": 35,
                "armour": 5,
                "cc": 4,
                "ff": 5,
                "weapons": [
                  {
                    "name": "Twin Bolters",
                    "modes": [
                      {"firepower": "Small Arms"}
                    ]
                  }
                ],
                "specialRules": ["Mounted", "Scout", "Walker"]
              },
              {
                "name": "Land Speeder",
                "type": "LV",
                "speed": 35,
                "armour": 4,
                "cc": 6,
                "ff": 5,
                "weapons": [
                  {
                    "name": "Multi-melta",
                    "modes": [
                      {"firepower": "MW5+", "range": 15},
                      {"firepower": "Small Arms, MW", "join": "and"}
                    ]
                  }
                ],
                "specialRules": ["Scout", "Skimmer"]
              },
              {
                "name": "Land Speeder Tornado",
                "type": "LV",
                "speed": 35,
                "armour": 4,
                "cc": 6,
                "ff": 5,
                "weapons": [
                  {
                    "name": "Assault Cannon",
                    "modes": [
                      {"firepower": "AP5+/AT5+", "range": 30}
                    ]
                  },
                  {
                    "name": "Heavy Bolter",
                    "modes": [
                      {"firepower": "AP5+", "range": 30}
                    ]
                  }
                ],
                "specialRules": ["Scout", "Skimmer"]
              },
              {
                "name": "Land Speeder Typhoon",
                "type": "LV",
                "speed": 35,
                "armour": 4,
                "cc": 6,
                "ff": 5,
                "weapons": [
                  {
                    "name": "Twin Typhoon Missile",
                    "modes": [
                      {"firepower": "AP3+/AT5+", "range": 45}
                    ]
                  },
                  {
                    "name": "Heavy Bolter",
                    "modes": [
                      {"firepower": "AP5+", "range": 30}
                    ]
                  }
                ],
                "specialRules": ["Scout", "Skimmer"]
              },
              {
                "name": "White Scars Attack Bike",
                "type": "LV",
                "speed": 35,
                "armour": 4,
                "cc": 5,
                "ff": 4,
                "weapons": [
                  {
                    "name": "Heavy Bolter",
                    "modes": [
                      {"firepower": "AP5+", "range": 30}
                    ]
                  }
                ],
                "specialRules": ["Walker"]
              },
              {
                "name": "White Scars Melta Bike",
                "type": "LV",
                "speed": 35,
                "armour": 4,
                "cc": 5,
                "ff": 5,
                "weapons": [
                  {
                    "name": "Multi-melta",
                    "modes": [
                      {"firepower": "MW5+", "range": 15},
                      {"firepower": "Small Arms, MW", "join": "and"}
                    ]
                  }
                ],
                "specialRules": ["Walker"]
              },
              {
                "name": "Hunter",
                "type": "AV",
                "speed": 30,
                "armour": 4,
                "cc": 6,
                "ff": 6,
                "weapons": [
                  {
                    "name": "Hunter-Killer",
                    "modes": [
                      {"firepower": "AP4+/AA4+", "range": 60}
                    ]
                  }
                ]
              },
              {
                "name": "Land Raider",
                "type": "AV",
                "speed": 25,
                "armour": 4,
                "cc": 6,
                "ff": 4,
                "weapons": [
                  {
                    "name": "2× Twin Lascannon",
                    "modes": [
                      {"firepower": "AT4+", "range": 45}
                    ]
                  },
                  {
                    "name": "Twin Heavy Bolter",
                    "modes": [
                      {"firepower": "AP4+", "range": 30}
                    ]
                  }
                ],
                "specialRules": ["Reinforced Armour", "Thick Rear Armour", "Transport"],
                "notes": "May transport one Terminator unit or two infantry units without Jump Packs or Mounted."
              },
              {
                "name": "Razorback",
                "type": "AV",
                "speed": 30,
                "armour": 5,
                "cc": 6,
                "ff": 5,
                "weapons": [
                  {
                    "name": "0-1 Twin Lascannon",
                    "modes": [
                      {"firepower": "AT4+", "range": 45}
                    ]
                  },
                  {
                    "name": "0-1 Twin Heavy Bolter",
                    "modes": [
                      {"firepower": "AP4+", "range": 30}
                    ]
                  }
                ],
                "specialRules": ["Transport"],
                "notes": "May transport one infantry unit (except a Terminator unit) without Jump Packs or Mounted. Armed with either a Twin Lascannon or a Twin Heavy Bolter. Razorbacks armed with a Twin Heavy Bolter have their firefight value increased to 4+."
              },
              {
                "name": "Rhino",
                "type": "AV",
                "speed": 30,
                "armour": 5,
                "cc": 6,
                "ff": 6,
                "weapons": [
                  {
                    "name": "Storm Bolter",
                    "modes": [
                      {"firepower": "Small Arms"}
                    ]
                  }
                ],
                "specialRules": ["Transport"],
                "notes": "May transport two infantry units (except Terminator units) without Jump Packs or Mounted."
              },
              {
                "name": "Whirlwind",
                "type": "AV",
                "speed": 30,
                "armour": 5,
                "cc": 6,
                "ff": 5,
                "weapons": [
                  {
                    "name": "Whirlwind",
                    "modes": [
                      {"firepower": "1BP, Ind", "range":45}
                    ]
                  }
                ]
              },
              {
                "name": "White Scar Vindicator",
                "type": "AV",
                "speed": 30,
                "armour": 4,
                "cc": 6,
                "ff": 4,
                "weapons": [
                  {
                    "name": "Demolisher",
                    "modes": [
                      {"firepower": "AP3+/AT4+ IC", "range":30}
                    ]
                  }
                ]
              },
              {
                "name": "Landing Craft",
                "type": "AC/WE",
                "speed": "Bomber",
                "armour": 4,
                "cc": 5,
                "ff": 3,
                "weapons": [
                  {
                    "name": "2× Twin Lascannon",
                    "modes": [
                      {"firepower": "AT4+", "range": 45}
                    ]
                  },
                  {
                    "name": "3× Twin Heavy Bolter",
                    "modes": [
                      {"firepower": "AP4+/AA5+", "range": 15}
                    ]
                  }
                ],
                "specialRules": ["Damage Capacity 4", "Fearless", "Planetfall", "Reinforced Armour", "Transport"],
                "notes": "May transport twelve infantry units, Attack Bikes or Dreadnoughts; Terminator units and Dreadnoughts count as two units each; plus any six armoured vehicle units (except Dreadnoughts); Land Raiders count as one and a half units each, rounding up. Critical Hit Effect: The unit and all units being carried are destroyed. All units within 5cm suffer a hit."
              },
              {
                "name": "Thunderhawk",
                "type": "AC/WE",
                "speed": "Bomber",
                "armour": 4,
                "cc": 5,
                "ff": 4,
                "weapons": [
                  {
                    "name": "Battle Cannon",
                    "modes": [
                      {"firepower": "AP4+/AT4+, FxF", "range": 75}
                    ]
                  },
                  {
                    "name": "2× Twin Heavy Bolter",
                    "modes": [
                      {"firepower": "AP4+/AA5+, FxF", "range": 30}
                    ]
                  },
                  {
                    "name": "Twin Heavy Bolter",
                    "modes": [
                      {"firepower": "AP4+/AA5+, Left", "range": 15}
                    ]
                  },
                  {
                    "name": "Twin Heavy Bolter",
                    "modes": [
                      {"firepower": "AP4+/AA5+, Right", "range": 15}
                    ]
                  }
                ],
                "specialRules": ["Damage Capacity 2", "Planetfall", "Reinforced Armour", "Transport"],
                "notes": "May transport eight infantry units, Attack Bikes or Dreadnoughts; Terminator units and Dreadnoughts count as two units each. Critical Hit Effect: The unit and all units being carried are destroyed."
              },
              {
                "name": "Battle Barge",
                "type": "SC",
                "weapons": [
                  {
                    "name": "Orbital Bombardment",
                    "modes": [
                      {"firepower": "14BP, MW"}
                    ]
                  }
                ],
                "specialRules": ["Slow and Steady", "Transport"],
                "notes": "May transport 60 infantry units, Attack Bikes, or Dreadnoughts; plus 60 armoured vehicle units (except Dreadnoughts); plus nine Thunderhawk Gunships and enough Drop Pods or Landing Craft to transport any other units being carried."
              },
              {
                "name": "Strike Cruiser",
                "type": "SC",
                "weapons": [
                  {
                    "name": "Orbital Bombardment",
                    "modes": [
                      {"firepower": "5BP, MW"}
                    ]
                  }
                ],
                "specialRules": ["Transport"],
                "notes": "May transport 20 infantry units, Attack Bikes, or Dreadnoughts; plus 20 light vehicles or armoured vehicle units (except Attack Bikes and Dreadnoughts); plus six Thunderhawk Gunships and enough Drop Pods or Landing Craft to transport any other units being carried."
              },
              {
                "name": "Drop Pod",
                "weapons": [
                  {
                    "name": "Deathwind",
                    "modes": [
                      {"firepower": "AP5+/AT5+", "range": 15}
                    ]
                  }
                ],
                "specialRules": ["Planetfall", "Transport"],
                "notes": "May transport one formation of only the following units: Devastator, Dreadnought, Tactical. After the drop pod lands, its Deathwind attacks all enemy units within 15cm. Each enemy formation attacked receives a Blast marker for coming under fire, and an extra Blast marker for each casualty. Then any troops carried in the drop pod must disembark within 5cm of the drop pod or within 5cm of another unit from the same formation that has already landed, so long as all units are placed within 15cm of the drop pod. Drop pod models should be removed from the board once the formation they transport has disembarked."
              }
            ],
            "sections": [
              {
                "name": "White Scars Core Detachments",
                "formations": [
                  {
                    "name": "Assault",
                    "units": "Four Assault units",
                    "upgrades": ["Commander","Vindicators"],
                    "points": 175
                  },
                  {
                    "name": "Bikes",
                    "units": "	Eight White Scars Bikes",
                    "upgrades": ["Commander","Bike Support"],
                    "points": 325
                  },
                  {
                    "name": "Land Speeder",
                    "units": "Any five of the following units: Land Speeder, Land Speeder Tornado",
                    "upgrades": ["Commander","Typhoons"],
                    "points": 200
                  },
                  {
                    "name": "Scout Bikes",
                    "units": "Five Scout Bikes",
                    "upgrades": ["Commander"],
                    "points": 150
                  }
                ]
              },
              {
                "name": "White Scars Support Detachments",
                "description": "One support detachment may be fielded per core detachment",
                "formations": [
                  {
                    "name": "Predator",
                    "units": "Any four of the following units: Predator Annihilator, Predator Destructor",
                    "upgrades": ["Commander", "Hunter", "Vindicators"],
                    "points": 250
                  }
                ]
              }
            ],
            "upgrades": {
              "title": "White Scars Upgrades",
              "description": "Each upgrade may be taken once per detachment",
              "items": [
                {
                  "name": "Commander",
                  "description": "Add any one of the following characters to any unit in the formation",
                  "options": [
                    {"description": "Captain, Chaplain, Librarian", "points": "50 points"},
                    {"description": "0–1 Supreme Commander per army", "points": "100 points"}
                  ]
                },
                {
                  "name": "Typhoons",
                  "description": "Replace up to five Land Speeders with an equal number of Land Speeder Typhoons",
                  "points": "10 points each"
                }
              ]
            }
          };

          $("#content").html(template(testData));
        });
    </script>
  </body>
</html>
